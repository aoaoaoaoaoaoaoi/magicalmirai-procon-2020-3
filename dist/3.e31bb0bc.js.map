{"version":3,"sources":["index.js"],"names":["TextAliveApp","Player","songUrl","animateWord","now","unit","contains","$","html","text","run","empty","player","app","mediaElement","document","querySelector","console","log","addListener","onAppReady","createFromSongUrl","onVideoReady","v","infoContents","data","song","name","artist","onTimerReady","requestPlay","w","video","firstWord","animate","next","window"],"mappings":"oBAAmBA;IAAXC,uBAAAA;AAER,IAAIC,OAAO,GAAG,6CAAd,EAEA;;AACA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,GAAD,EAAMC,IAAN,EAAe;AACjC,MAAIA,IAAI,CAACC,QAAL,CAAcF,GAAd,CAAJ,EAAwB;AACtBG,IAAAA,CAAC,CAAC,OAAD,CAAD,CAAWC,IAAX,CAAgBH,IAAI,CAACI,IAArB;AACD;AACF,CAJD;;AAMA,IAAMC,GAAG,GAAG,SAANA,GAAM,GAAK;AACf;AACAH,EAAAA,CAAC,CAAC,OAAD,CAAD,CAAWI,KAAX;AACAJ,EAAAA,CAAC,CAAC,QAAD,CAAD,CAAYI,KAAZ;AAEA,MAAMC,MAAM,GAAG,IAAIX,MAAJ,CAAW;AAAEY,IAAAA,GAAG,EAAE,IAAP;AAAcC,IAAAA,YAAY,EAAEC,QAAQ,CAACC,aAAT,CAAuB,QAAvB;AAA5B,GAAX,CAAf;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACAN,EAAAA,MAAM,CAACO,WAAP,CAAmB;AACjBC,IAAAA,UAAU,EAAE,oBAACP,GAAD,EAAS;AACnBI,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAN,MAAAA,MAAM,CAACS,iBAAP,CAAyBnB,OAAzB;AACD,KAJgB;AAMjB;AACA;AACAoB,IAAAA,YAAY,EAAE,sBAACC,CAAD,EAAO;AACnBN,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,UAAIM,YAAY,GAAG,EAAnB;AACAA,MAAAA,YAAY,IAAI,eAAhB;AACAA,MAAAA,YAAY,IAAI,iBAAiBZ,MAAM,CAACa,IAAP,CAAYC,IAAZ,CAAiBC,IAAlC,GAAyC,OAAzD;AACAH,MAAAA,YAAY,IAAI,qBAAqBZ,MAAM,CAACa,IAAP,CAAYC,IAAZ,CAAiBE,MAAjB,CAAwBD,IAA7C,GAAoD,OAApE;AACApB,MAAAA,CAAC,CAAC,OAAD,CAAD,CAAWC,IAAX,CAAgBgB,YAAhB;AACAjB,MAAAA,CAAC,CAAC,OAAD,CAAD,CAAWC,IAAX,CAAgB,WAAhB;AACD,KAhBgB;AAkBjB;AACA;AACAqB,IAAAA,YAAY,EAAE,wBAAM;AAClBZ,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAX,MAAAA,CAAC,CAAC,OAAD,CAAD,CAAWC,IAAX,CAAgB,QAAhB;AACAI,MAAAA,MAAM,CAACkB,WAAP,GAHkB,CAIlB;;AACA,UAAIC,CAAC,GAAGnB,MAAM,CAACoB,KAAP,CAAaC,SAArB;;AACA,aAAOF,CAAP,EAAU;AACRA,QAAAA,CAAC,CAACG,OAAF,GAAY/B,WAAZ;AACA4B,QAAAA,CAAC,GAAGA,CAAC,CAACI,IAAN;AACD;AACF;AA9BgB,GAAnB;AAgCD,CAvCD;;AAyCAC,MAAM,CAAC1B,GAAP,GAAaA,GAAb","file":"3.e31bb0bc.js","sourceRoot":"..","sourcesContent":["const { Player } = TextAliveApp;\r\n\r\nlet songUrl = 'https://www.youtube.com/watch?v=a-Nf3QUFkOU';\r\n\r\n// 単語ごとに歌詞を表示\r\nconst animateWord = (now, unit) => {\r\n  if (unit.contains(now)) {\r\n    $('#text').html(unit.text);\r\n  }\r\n};\r\n\r\nconst run = () =>{\r\n  //初期化処理\r\n  $('#info').empty();\r\n  $('#media').empty();\r\n\r\n  const player = new Player({ app: true , mediaElement: document.querySelector('#media')});\r\n  console.log('Run');\r\n  player.addListener({\r\n    onAppReady: (app) => {\r\n      console.log('AppReady');\r\n      player.createFromSongUrl(songUrl);\r\n    },\r\n\r\n    // 楽曲情報読み込み完了後、呼ばれる\r\n    // この時点ではrequestPlay()等が実行不能\r\n    onVideoReady: (v) => {\r\n      console.log('VideoReady');\r\n      let infoContents = '';\r\n      infoContents += '<h1>楽曲情報</h1>';\r\n      infoContents += '<h2>楽曲名：<br>' + player.data.song.name + '</h2>';\r\n      infoContents += '<h2>アーティスト名：<br>' + player.data.song.artist.name + '</h2>';\r\n      $('#info').html(infoContents);\r\n      $('#text').html('[再生準備待機中]');\r\n    },\r\n\r\n    // 再生準備完了後、呼ばれる\r\n    // これ以降、requestPlay()等が実行可能\r\n    onTimerReady: () => {\r\n      console.log('TimerReady');\r\n      $('#text').html('[再生開始]');\r\n      player.requestPlay();\r\n      // 定期的に呼ばれる各単語の \"animate\" 関数をセットする\r\n      let w = player.video.firstWord;\r\n      while (w) {\r\n        w.animate = animateWord;\r\n        w = w.next;\r\n      }\r\n    },\r\n  });\r\n}\r\n\r\nwindow.run = run"]}